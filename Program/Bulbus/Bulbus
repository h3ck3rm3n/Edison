//Wykorzystane piny (oprócz 7)
//11,10,9,14(A0),15(A1),16(A2)

#define przekaznik 9
#define darlington 10
#define czujka 11
#define poten 14
#define fotoRes 15
#define therm 16

#include <Wire.h>
#include <rgb_lcd.h> 
rgb_lcd lcd;

//MW 
bool menustart=true; //teraz włączone- gdy prawda, uruchamia funkcję menu.
//MW

//MS
float Rsensor;            // opornosc fotorezystora w kiloomach

double temps() {
 double Temp;
 int RawADC = analogRead(therm);
 Temp = log(10000.0*((1024.0/RawADC-1)));
//         =log(10000.0/(1024.0/RawADC-1)) // for pull-up configuration
 Temp = 1 / (0.001129148 + (0.000234125 + (0.0000000876741 * Temp * Temp ))* Temp );
 Temp = Temp - 273.15;            // Convert Kelvin to Celcius
 return Temp;
}
float lux() {
  int sensorValue = analogRead(fotoRes); 
  Rsensor=(float)(1023-sensorValue)*10/sensorValue;
  int lx = map(Rsensor, 0, 1023, 50, 1000);
  return lx;
}
//MS

//MW
void Menu() {
     int pot = analogRead(poten);
     pot = map(pot, 0, 1023, 0, 4);  
        switch(pot)
        {
        case 0:
        lcd.clear();
        lcd.setCursor(0, 0);
        lcd.print("Temperatura: ");
        lcd.print(temps());
        lcd.setCursor(0, 1);
        lcd.print("Jasnosc: ");
        lcd.print(lux());
        break;
        case 1:
        lcd.clear();
        lcd.setCursor(0, 0);
        lcd.print("Grubas: ");
        lcd.setCursor(0, 1);
        lcd.print("Start ");
        break;  
        case 2:
        lcd.clear();
        lcd.setCursor(0, 0);
        lcd.print(":::>");
        lcd.setCursor(0, 1);
        lcd.print("Herezja");
        break; 
        case 3:
        lcd.clear();
        lcd.setCursor(0, 0);
        lcd.print("Maslo do ciecia");
        lcd.setCursor(0, 1);
        lcd.print("Pierogi z miesem");
        break; 
        }
    delay(1);
}


//MW

void setup() {
   pinMode(czujka, INPUT);
   Serial.begin(9600);
   pinMode(14, INPUT);
   pinMode(15, INPUT);
   pinMode(16, INPUT);
   
   lcd.begin(16, 2); //initialize the module 
   lcd.setRGB(60, 60, 200);                 //set the color  
   lcd.setCursor(0, 0);                //set the position of cursor
   lcd.print("ok.");
   delay(500);  
}

void loop() {
  Menu();
  delay(500);
}
